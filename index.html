<!DOCTYPE HTML>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>SolarPi</title>
	<style>
		#iframe-container {
			position: relative;
			overflow: hidden;
			padding-top: 56.25%;
		}

		#influx-iframe {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			border: 0;
		}
	</style>
	<script type="text/javascript">
		function loginUser(username, password) {
			fetch(window.location.origin + ":8080/api/v2/signin", {
				method: 'post',
				headers: {
					"authorization": 'Basic ' + btoa(username + ":" + password)
				},
				credentials: "include"
			}).catch(function (error) {
				console.log('Login request failed: ', error);
			});
		}

		function loadInflux() {
			const user = "";
			const password = "";
			const org = "";
			const board = "";
			await loginUser(user, password);
			container = document.getElementById("iframe-container");
			container.innerHTML = "<iframe src='" + window.location.origin + ":8080/orgs/" + org + "/dashboards/" + board + "' id='influx-iframe' />";
		}
	</script>
</head>

<body onload="loadInflux()">
	<div id="iframe-container"></div>
</body>

</html>